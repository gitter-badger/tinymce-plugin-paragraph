tinymce.PluginManager.add("paragraph",function(a){function b(){var b=a.settings.color_picker_callback;return b?function(){var c=this;b.call(a,function(a){c.value(a).fire("change")},c.value())}:void 0}function c(){var b=a.dom.getParent(a.selection.getStart(),"p");a.windowManager.open({bodyType:"tabpanel",title:"Paragraph properties",data:{indent:a.dom.getStyle(b,"text-indent"),linespacing:a.dom.getStyle(b,"line-height"),padding:a.dom.getStyle(b,"padding"),margin:a.dom.getStyle(b,"margin"),borderwidth:a.dom.getStyle(b,"border-width"),bordercolor:a.dom.getStyle(b,"border-color")},body:[{title:"Spacings",type:"form",items:h},{title:"Borders",type:"form",items:i}],onsubmit:function(c){a.dom.setStyle(b,"text-indent",c.data.indent),a.dom.setStyle(b,"line-height",c.data.linespacing),a.dom.setStyle(b,"padding",c.data.padding),a.dom.setStyle(b,"margin",c.data.margin),a.dom.setStyle(b,"border-width",c.data.borderwidth),c.data.borderwidth&&a.dom.setStyle(b,"border-style","solid"),a.dom.setStyle(b,"border-color",c.data.bordercolor)}})}function d(b){if(b.lastLevel){var c=a.dom.getParent(a.selection.getStart(),"p,div");"DIV"===c.tagName&&a.dom.rename(c,"p")}}function e(a){return{label:"Unit",name:a,type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"pt",value:"pt"},{text:"cm",value:"cm"},{text:"mm",value:"mm"}]}}function f(a,b){return{type:"fieldset",title:a,items:b}}function g(a){return{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:100},items:a}}var h={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0},i={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0};h.items=[f("Paragraph",[g([{label:"Indent",name:"indent"},e("indentUnit"),{label:"Line spacing",name:"linespacing"},e("linespacingUnit")])]),f("paddings",[g([{label:"Padding",name:"padding"},{label:"Unit",name:"paddingUnit",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"pt",value:"pt"},{text:"cm",value:"cm"},{text:"mm",value:"mm"}]}])]),f("margins",[g([{label:"Margin",name:"margin"},{label:"Unit",name:"marginUnit",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"pt",value:"pt"},{text:"cm",value:"cm"},{text:"mm",value:"mm"}]}])])],i.items=[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:100},items:[{label:"Border width",name:"borderwidth"},{label:"Border color",name:"bordercolor",type:"colorbox",onaction:b()}]}],a.on("change",d),a.addMenuItem("paragraph",{separator:"before",text:"Paragraphe",context:"format",onclick:c})});