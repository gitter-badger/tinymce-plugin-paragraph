tinymce.PluginManager.add("paragraph",function(a){function b(){var b=a.settings.color_picker_callback;return b?function(){var c=this;b.call(a,function(a){c.value(a).fire("change")},c.value())}:void 0}function c(){var b=a.dom.getParent(a.selection.getStart(),"p");a.windowManager.open({bodyType:"tabpanel",title:"Paragraph properties",body:[k,l,m],data:{indent:a.dom.getStyle(b,"text-indent"),linespacing:a.dom.getStyle(b,"line-height"),padding:a.dom.getStyle(b,"padding"),margin:a.dom.getStyle(b,"margin"),borderwidth:a.dom.getStyle(b,"border-width"),bordercolor:a.dom.getStyle(b,"border-color")},onsubmit:function(c){a.dom.setStyle(b,"text-indent",c.data.indent),a.dom.setStyle(b,"line-height",c.data.linespacing),a.dom.setStyle(b,"padding",c.data.padding),a.dom.setStyle(b,"margin",c.data.margin),a.dom.setStyle(b,"border-width",c.data.borderwidth),c.data.borderwidth&&a.dom.setStyle(b,"border-style","solid"),a.dom.setStyle(b,"border-color",c.data.bordercolor)}})}function d(b){var c,d,e=a.selection.getRng();e.startContainer===e.endContainer&&"#text"===e.startContainer.nodeName&&(c=e.startContainer,c.parentElement&&"DIV"===c.parentElement.nodeName&&(d=$("<p></p>"),$(c).wrap(d)))}function e(a){return{label:"Unit",name:a,type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"pt",value:"pt"},{text:"cm",value:"cm"},{text:"mm",value:"mm"}]}}function f(a,b,c){return{title:a,type:"form",items:{type:"form",direction:c||"collumn",labelGapCalc:"children",padding:0,items:b}}}function g(a,b){return{type:"fieldset",title:a,items:b}}function h(a){return{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:100},items:a}}function i(a,b,c){return{label:a,name:b,type:"listbox",text:"None",minWidth:90,maxWidth:null,values:c}}function j(){return[{text:"pt",value:"pt"},{text:"cm",value:"cm"},{text:"mm",value:"mm"}]}var k=f("General",[g("Paragraph",[h([{label:"Indent",name:"indent"},e("indentUnit"),{label:"Line spacing",name:"linespacing"},e("linespacingUnit")])])]),l=f("Spacing",[g("Padding",[h([{label:"Padding top",name:"paddingTop"},i("Unit","paddingTopUnit",j()),{label:"Padding right",name:"paddingRight"},i("Unit","paddingRightUnit",j()),{label:"Padding bottom",name:"paddingBottom"},i("Unit","paddingBottomUnit",j()),{label:"Padding left",name:"paddingLeft"},i("Unit","paddingLeftUnit",j())])]),g("Margin",[h([{label:"Margin top",name:"marginTop"},i("Unit","marginTopUnit",j()),{label:"Margin right",name:"marginRight"},i("Unit","marginRightUnit",j()),{label:"Margin bottom",name:"marginBottom"},i("Unit","marginBottomUnit",j()),{label:"Margin left",name:"marginLeft"},i("Unit","marginLeftUnit",j())])])]),m=f("Borders",[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:100},items:[{label:"Border width",name:"borderwidth"},{label:"Border color",name:"bordercolor",type:"colorbox",onaction:b()}]}]);a.on("change",d),a.addMenuItem("paragraph",{separator:"before",text:"Paragraphe",context:"format",onclick:c})});